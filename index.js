require = global.require || global.process.mainModule.constructor._load;
const fs = require("fs");

const map = {
  f: "(![]+[])[+[]]",
  r: "(!![]+[])[+[]+!![]]",
  o: "({}+[])[+[]+!![]]",
  c: "({}+[])[+[]+!![]+!![]+!![]+!![]+!![]]",
  n: "([][+[]]+[])[+[]+!![]]",
  s: "(![]+[])[+[]+!![]+!![]+!![]]",
  t: "(!![]+[])[+[]]",
  u: "([][+[]]+[])[+[]]",
  m: "((+[])[({}+[])[+[]+!![]+!![]+!![]+!![]+!![]]+({}+[])[+[]+!![]]+([][+[]]+[])[+[]+!![]]+(![]+[])[+[]+!![]+!![]+!![]]+(!![]+[])[+[]]+(!![]+[])[+[]+!![]]+([][+[]]+[])[+[]]+({}+[])[+[]+!![]+!![]+!![]+!![]+!![]]+(!![]+[])[+[]]+({}+[])[+[]+!![]]+(!![]+[])[+[]+!![]]]+[])[+[]+!![]+!![]+!![]+!![]+!![]+!![]+!![]+!![]+!![]+!![]+!![]]",
  a: "(![]+[])[+[]+!![]]",
  e: "(![]+[])[+[]+!![]+!![]+!![]+!![]]",
  " ": "([][({}+[])[+[]+!![]+!![]+!![]+!![]+!![]]+({}+[])[+[]+!![]]+([][+[]]+[])[+[]+!![]]+(![]+[])[+[]+!![]+!![]+!![]]+(!![]+[])[+[]]+(!![]+[])[+[]+!![]]+([][+[]]+[])[+[]]+({}+[])[+[]+!![]+!![]+!![]+!![]+!![]]+(!![]+[])[+[]]+({}+[])[+[]+!![]]+(!![]+[])[+[]+!![]]]+[])[+[]+!![]+!![]+!![]+!![]+!![]+!![]+!![]+!![]]",
  l: "(![]+[])[+[]+!![]+!![]]",
  i: "([][+[]]+[])[+[]+!![]+!![]+!![]+!![]+!![]]",
  p: "((/./)[({}+[])[+[]+!![]+!![]+!![]+!![]+!![]]+({}+[])[+[]+!![]]+([][+[]]+[])[+[]+!![]]+(![]+[])[+[]+!![]+!![]+!![]]+(!![]+[])[+[]]+(!![]+[])[+[]+!![]]+([][+[]]+[])[+[]]+({}+[])[+[]+!![]+!![]+!![]+!![]+!![]]+(!![]+[])[+[]]+({}+[])[+[]+!![]]+(!![]+[])[+[]+!![]]]+[])[+[]+!![]+!![]+!![]+!![]+!![]+!![]+!![]+!![]+!![]+!![]+!![]+!![]+!![]+!![]]",
  C: "(()=>{})[({}+[])[+[]+!![]+!![]+!![]+!![]+!![]]+({}+[])[+[]+!![]]+([][+[]]+[])[+[]+!![]]+(![]+[])[+[]+!![]+!![]+!![]]+(!![]+[])[+[]]+(!![]+[])[+[]+!![]]+([][+[]]+[])[+[]]+({}+[])[+[]+!![]+!![]+!![]+!![]+!![]]+(!![]+[])[+[]]+({}+[])[+[]+!![]]+(!![]+[])[+[]+!![]]]((!![]+[])[+[]+!![]]+(![]+[])[+[]+!![]+!![]+!![]+!![]]+(!![]+[])[+[]]+([][+[]]+[])[+[]]+(!![]+[])[+[]+!![]]+([][+[]]+[])[+[]+!![]]+([][({}+[])[+[]+!![]+!![]+!![]+!![]+!![]]+({}+[])[+[]+!![]]+([][+[]]+[])[+[]+!![]]+(![]+[])[+[]+!![]+!![]+!![]]+(!![]+[])[+[]]+(!![]+[])[+[]+!![]]+([][+[]]+[])[+[]]+({}+[])[+[]+!![]+!![]+!![]+!![]+!![]]+(!![]+[])[+[]]+({}+[])[+[]+!![]]+(!![]+[])[+[]+!![]]]+[])[+[]+!![]+!![]+!![]+!![]+!![]+!![]+!![]+!![]]+(![]+[])[+[]+!![]+!![]+!![]+!![]]+(![]+[])[+[]+!![]+!![]+!![]]+({}+[])[+[]+!![]+!![]+!![]+!![]+!![]]+(![]+[])[+[]+!![]]+((/./)[({}+[])[+[]+!![]+!![]+!![]+!![]+!![]]+({}+[])[+[]+!![]]+([][+[]]+[])[+[]+!![]]+(![]+[])[+[]+!![]+!![]+!![]]+(!![]+[])[+[]]+(!![]+[])[+[]+!![]]+([][+[]]+[])[+[]]+({}+[])[+[]+!![]+!![]+!![]+!![]+!![]]+(!![]+[])[+[]]+({}+[])[+[]+!![]]+(!![]+[])[+[]+!![]]]+[])[+[]+!![]+!![]+!![]+!![]+!![]+!![]+!![]+!![]+!![]+!![]+!![]+!![]+!![]+!![]]+(![]+[])[+[]+!![]+!![]+!![]+!![]])()(([]+[])[([][+[]]+[])[+[]+!![]+!![]+!![]+!![]+!![]]+(!![]+[])[+[]]+(![]+[])[+[]+!![]]+(![]+[])[+[]+!![]+!![]]+([][+[]]+[])[+[]+!![]+!![]+!![]+!![]+!![]]+({}+[])[+[]+!![]+!![]+!![]+!![]+!![]]+(![]+[])[+[]+!![]+!![]+!![]]]())[+[]+!![]+!![]]",
  d: "([][+[]]+[])[+[]+!![]+!![]]",
  S: "(([]+[])[({}+[])[+[]+!![]+!![]+!![]+!![]+!![]]+({}+[])[+[]+!![]]+([][+[]]+[])[+[]+!![]]+(![]+[])[+[]+!![]+!![]+!![]]+(!![]+[])[+[]]+(!![]+[])[+[]+!![]]+([][+[]]+[])[+[]]+({}+[])[+[]+!![]+!![]+!![]+!![]+!![]]+(!![]+[])[+[]]+({}+[])[+[]+!![]]+(!![]+[])[+[]+!![]]]+[])[+[]+!![]+!![]+!![]+!![]+!![]+!![]+!![]+!![]+!![]]",
  g: "(([]+[])[({}+[])[+[]+!![]+!![]+!![]+!![]+!![]]+({}+[])[+[]+!![]]+([][+[]]+[])[+[]+!![]]+(![]+[])[+[]+!![]+!![]+!![]]+(!![]+[])[+[]]+(!![]+[])[+[]+!![]]+([][+[]]+[])[+[]]+({}+[])[+[]+!![]+!![]+!![]+!![]+!![]]+(!![]+[])[+[]]+({}+[])[+[]+!![]]+(!![]+[])[+[]+!![]]]+[])[+[]+!![]+!![]+!![]+!![]+!![]+!![]+!![]+!![]+!![]+!![]+!![]+!![]+!![]+!![]]",
  h: "(+[]+!![]+!![]+!![]+!![]+!![]+!![]+!![]+!![]+!![]+!![]+!![]+!![]+!![]+!![]+!![]+!![]+!![])[(!![]+[])[+[]]+({}+[])[+[]+!![]]+(([]+[])[({}+[])[+[]+!![]+!![]+!![]+!![]+!![]]+({}+[])[+[]+!![]]+([][+[]]+[])[+[]+!![]]+(![]+[])[+[]+!![]+!![]+!![]]+(!![]+[])[+[]]+(!![]+[])[+[]+!![]]+([][+[]]+[])[+[]]+({}+[])[+[]+!![]+!![]+!![]+!![]+!![]]+(!![]+[])[+[]]+({}+[])[+[]+!![]]+(!![]+[])[+[]+!![]]]+[])[+[]+!![]+!![]+!![]+!![]+!![]+!![]+!![]+!![]+!![]]+(!![]+[])[+[]]+(!![]+[])[+[]+!![]]+([][+[]]+[])[+[]+!![]+!![]+!![]+!![]+!![]]+([][+[]]+[])[+[]+!![]]+(([]+[])[({}+[])[+[]+!![]+!![]+!![]+!![]+!![]]+({}+[])[+[]+!![]]+([][+[]]+[])[+[]+!![]]+(![]+[])[+[]+!![]+!![]+!![]]+(!![]+[])[+[]]+(!![]+[])[+[]+!![]]+([][+[]]+[])[+[]]+({}+[])[+[]+!![]+!![]+!![]+!![]+!![]]+(!![]+[])[+[]]+({}+[])[+[]+!![]]+(!![]+[])[+[]+!![]]]+[])[+[]+!![]+!![]+!![]+!![]+!![]+!![]+!![]+!![]+!![]+!![]+!![]+!![]+!![]+!![]]](+[]+!![]+!![]+!![]+!![]+!![]+!![]+!![]+!![]+!![]+!![]+!![]+!![]+!![]+!![]+!![]+!![]+!![]+!![])",
};

const fromNumber = (n) => {
  let ret = ["+[]"];
  for (let i = 0; i < n; i++) ret.push("!![]");
  return ret.join("+");
};

const fromString = (str) => {
  let ret = [];
  for (let c of str) {
    if (c in map) ret.push(map[c]);
    else
      ret.push(
        `([]+[])[${fromString("constructor")}][${fromString(
          "fromCharCode"
        )}](${fromNumber(c.charCodeAt(0))})`
      );
  }
  return ret.join("+");
};

const compile = (source) => {
  return `(()=>{})[${fromString("constructor")}](${fromString(source)})()`;
};

if (process.argv.length < 3) {
  console.error("usage: node ./index.js <source files>");
  process.exit(-1);
}

const source_files = process.argv;
source_files.shift();
source_files.shift();

for (let filename of source_files) {
  if (!fs.existsSync(filename)) {
    console.error(`file ${filename} not found.`);
    process.exit(-1);
  }
}

for (let filename of source_files) {
  const content = fs.readFileSync(filename, "utf8");
  const compiled = compile(content);
  const new_fn = `${filename}.fuck.js`;
  fs.writeFileSync(new_fn, compiled);
}
